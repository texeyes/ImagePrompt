<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Universe Builder | Create Something Special</title>
  <style>
    /* 
       THEME: "Cosmic Creator" 
       Inverse Primary Triad: Cyan (Blue-Green), Magenta (Red-Purple), Yellow.
       Background: Deep Space Violet.
    */
    :root {
      /* Deep Space Foundation */
      --bg: #0f0518;          /* Very dark violet/black */
      --panel: #1a0b2e;       /* Lighter violet panel */
      --stroke: #361b54;      /* Border color */
      
      /* Typography */
      --text: #e0d9f6;        /* Soft violet-white text */
      --muted: #9ca3af;       /* Standard muted text */
      
      /* Inverse Primaries (Vibrant) */
      --primary: #00f0ff;     /* CYAN: Main actions, highlights */
      --secondary: #ff0099;   /* MAGENTA: Headers, accents */
      --tertiary: #ffd700;    /* YELLOW: Chips, special highlights */
      
      /* Inputs */
      --field: #240f3e;       /* Input background */
      --chip-bg: #2d1b4e;     
    }

    * { box-sizing: border-box; }
    
    body {
      margin: 0; padding: 30px;
      background: linear-gradient(135deg, #05010a 0%, var(--bg) 100%);
      color: var(--text);
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
    }

    .wrap {
      max-width: 1200px; margin: 0 auto;
      display: grid; gap: 24px; grid-template-columns: 420px 1fr;
      animation: fadeIn 0.8s ease-out;
    }
    @media (max-width: 980px){ .wrap{ grid-template-columns: 1fr; } }

    /* Header: Welcoming and Special */
    header {
      max-width: 1200px; margin: 0 auto 24px auto;
      text-align: center;
      padding: 20px 0;
    }
    h1 {
      margin: 0 0 8px 0; 
      font-size: 32px; 
      font-weight: 800;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.5px;
    }
    .sub {
      color: var(--text); opacity: 0.8; font-size: 15px; max-width: 600px; margin: 0 auto;
      line-height: 1.5;
    }

    /* Cards */
    .card {
      background: rgba(26, 11, 46, 0.85); /* Glassy panel */
      border: 1px solid var(--stroke);
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      overflow: hidden;
      backdrop-filter: blur(10px);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .card:hover {
      box-shadow: 0 12px 40px rgba(0, 240, 255, 0.05); /* Subtle cyan glow */
      border-color: rgba(0, 240, 255, 0.3);
    }

    .hd {
      padding: 16px 20px;
      border-bottom: 1px solid var(--stroke);
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      background: rgba(0,0,0,0.2);
    }
    .hd h2 {
      margin: 0; font-size: 15px; font-weight: 700; 
      color: var(--secondary); text-transform: uppercase; letter-spacing: 1px;
    }

    /* Action Buttons */
    .actions { display: flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end; align-items: center; }

    button {
      appearance: none; border: 1px solid var(--stroke);
      background: var(--field); color: var(--text);
      padding: 8px 12px; border-radius: 8px;
      font-size: 12px; font-weight: 600; cursor: pointer;
      transition: all 0.2s;
    }
    button:hover {
      background: rgba(255,255,255,0.1);
      border-color: var(--text);
      transform: translateY(-1px);
    }
    
    /* Primary Action (Cyan) */
    button.primary {
      background: rgba(0, 240, 255, 0.15);
      border-color: var(--primary);
      color: var(--primary);
      box-shadow: 0 0 10px rgba(0, 240, 255, 0.1);
    }
    button.primary:hover {
      background: var(--primary); color: #000;
      box-shadow: 0 0 20px rgba(0, 240, 255, 0.4);
    }

    /* Secondary Action (Magenta/Pink - "Good" actions) */
    button.good {
      background: rgba(255, 0, 153, 0.15);
      border-color: var(--secondary);
      color: var(--secondary);
    }
    button.good:hover {
      background: var(--secondary); color: white;
      box-shadow: 0 0 20px rgba(255, 0, 153, 0.4);
    }

    /* Inputs & Layout */
    .bd { padding: 20px; }
    .grid { display: grid; gap: 16px; }
    
    .field label {
      display: flex; align-items: center; justify-content: space-between; gap: 10px;
      font-size: 12px; color: var(--muted); margin-bottom: 8px; font-weight: 500;
    }
    
    select, textarea, input[type="text"], input[type="number"] {
      width: 100%;
      background: var(--field);
      color: var(--text);
      border: 1px solid var(--stroke);
      border-radius: 8px;
      padding: 12px;
      font-size: 13px;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    select:focus, textarea:focus, input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 240, 255, 0.15);
    }
    
    .help { margin-top: 6px; color: var(--muted); font-size: 11px; line-height: 1.4; font-style: italic;}
    
    /* Chips */
    .chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
    .chip {
      background: var(--chip-bg);
      border: 1px solid var(--stroke);
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 11px;
      color: var(--muted);
      border-left: 2px solid var(--tertiary); /* Yellow accent */
    }
    .chip b { color: var(--tertiary); font-weight: 600; margin-left: 4px; }

    /* Outputs */
    .split { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 520px){ .split { grid-template-columns: 1fr; } }
    .mono { 
      font-family: 'Menlo', 'Consolas', monospace; 
      font-size: 12px; line-height: 1.5; color: #d4d4d4; 
    }
    textarea[readonly] { background: rgba(0,0,0,0.3); border-color: transparent; }

    /* Controls Group (Number input + Btn) */
    .rnd-group {
      display: inline-flex; gap: 4px; align-items: center; 
      background: var(--field); border: 1px solid var(--stroke); 
      border-radius: 8px; padding: 3px 4px 3px 8px;
    }
    .rnd-group input { 
      border: none; background: transparent; width: 34px; padding: 0; 
      height: auto; text-align: center; color: var(--tertiary); font-weight: bold;
    }
    .rnd-group button {
      border: none; background: transparent; padding: 6px 8px; 
      color: var(--text); font-size: 11px; margin: 0; box-shadow: none;
    }
    .rnd-group button:hover { background: rgba(255,255,255,0.1); color: #fff; transform: none; }

    /* Custom Checkbox Toggle */
    .toggle-label {
      cursor: pointer; display: flex; align-items: center; gap: 6px; 
      font-size: 11px; color: var(--primary); font-weight: 600;
      user-select: none;
      background: rgba(0, 240, 255, 0.05);
      padding: 4px 8px; border-radius: 4px; border: 1px solid transparent;
    }
    .toggle-label:hover { border-color: rgba(0, 240, 255, 0.3); }
    .toggle-label input { accent-color: var(--primary); }

    /* Toast Notification */
    .toast {
      position: fixed; right: 24px; bottom: 24px;
      background: var(--secondary); color: #fff;
      padding: 12px 20px; border-radius: 8px; font-weight: 600;
      box-shadow: 0 10px 30px rgba(255, 0, 153, 0.4);
      opacity: 0; transform: translateY(10px); pointer-events: none;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      z-index: 100;
    }
    .toast.show { opacity: 1; transform: translateY(0); }

    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>

<body>
  <header>
    <h1>Universe Builder</h1>
    <p class="sub">
      Welcome, Creator. You are the architect of this reality. <br>
      Select your parameters below to generate something magnificent.
    </p>
  </header>

  <div class="wrap">
    <!-- FILTER CARD -->
    <section class="card" id="builderCard">
      <div class="hd">
        <h2>Parameters</h2>
        <div class="actions">
          <!-- 1) Standard Randomize -->
          <button id="randomizeBtn" class="primary" title="Randomize only checked categories">Randomize Checked</button>
          
          <!-- 2) Random (N) Button -->
          <div class="rnd-group" title="Pick exactly N categories (only from checked)">
             <input type="number" id="rndCountInput" value="3" min="1" max="20">
             <button id="rndCountBtn">Rand(N)</button>
          </div>

          <!-- 3) Random (4-7) Button -->
          <button id="rndRangeBtn" class="primary" title="Pick 4 to 7 random categories (only from checked)">Rand(4-7)</button>

          <div style="width:1px; height:20px; background:var(--stroke); margin:0 4px;"></div>

          <button id="resetBtn" title="Clear selections">Reset</button>
        </div>
      </div>
      <div class="bd">
        <div class="grid" id="form"></div>

        <div class="field" style="margin-top:24px; border-top:1px solid var(--stroke); padding-top:16px;">
          <label>
            <span style="color:var(--tertiary)">Extra Directives (Optional)</span>
            <span style="font-size:10px; opacity:0.6">Appends to final output</span>
          </label>
          <textarea id="extraNotes" placeholder="Add specific constraints: camera angles, lighting specificities, aspect ratios, or magical rules..."></textarea>
        </div>

        <div class="chips" id="chips"></div>
      </div>
    </section>

    <!-- OUTPUT CARD -->
    <section class="card">
      <div class="hd">
        <h2>Reality Output</h2>
        <div class="actions">
           <!-- Consolidated Copy Buttons -->
           <button id="copyAllBtn" class="good" title="Copy everything">Copy All</button>
        </div>
      </div>
      <div class="bd">
        <div class="split">
          <div class="field">
            <label>
                <span>Spec Sheet</span>
                <!-- SPECIFIC COPY BUTTON FOR SPEC -->
                <button id="copySpecBtn" style="padding:2px 8px; font-size:10px; margin-left:auto">Copy Spec</button>
            </label>
            <textarea id="specOut" class="mono" readonly></textarea>
          </div>
          <div class="field">
            <label>
                <span>Condensed Prompt</span>
                <button id="copyPromptBtn" style="padding:2px 8px; font-size:10px; margin-left:auto">Copy Prompt</button>
            </label>
            <textarea id="promptOut" class="mono" readonly></textarea>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast">Captured! The universe awaits.</div>

<script>
/**
 * -----------------------------------------------------------
 * CONFIGURATION
 * PASTE YOUR ORIGINAL DATA BELOW WHERE INDICATED
 * -----------------------------------------------------------
 */
const CONFIG = {
  version: "2.0 Cosmic",
  generator_name: "Universe Builder",
  categories: [
    {
      key: "archetype",
      label: "Archetype",
      description: "High-level character/concept archetype.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'ARCHETYPE' OPTIONS HERE ---
        { value:"an artist", label:"Artist", description:"an artist who extremely into their art and top in the world." },
        { value:"vaca influencer", label:"Vacation Lifestyle Influencer", description:"Vacation Lifestyle Influencer." },
        { value:"minimalist_light_sculpture", label:"Minimalist Light Sculpture", description:"An experiential architectural pavilion and contemporary light installation." },
        { value:"eccentric_fashion_outsider", label:"Eccentric Fashion Outsider", description:"Surrealist dandy and oddball sophisticate; a Wes Anderson-style character." },
        { value:"art_deco_android", label:"Art Deco Android", description:"Luxury cyborg and streamline moderne automaton; a 1920s-30s retro-futurist mannequin." },
        { value:"wasteland_scavenger", label:"Wasteland Scavenger", description:"Post-apocalyptic survivor and weathered explorer; a dieselpunk spacefarer in ruins." },
        { value:"desert_wanderer", label:"Desert Wanderer", description:"Rugged frontier icon and southwestern rancher; a stylized vaquero." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "species",
      label: "Species / Being Type",
      description: "What the subject literally is (human, android, creature, etc).",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'SPECIES' OPTIONS HERE ---
        { value:"human_machine_hybrid_male", label:"Human-machine hybrid or android", description:"A cybernetic male figure integrated with clockwork." },
        { value:"mythological_female", label:"Mythological creature", description:"A female Mythological character" },
        { value:"inanimate_installation_with_scale_figure", label:"N/A (Inanimate architectural installation)", description:"Includes a human figure in a winter coat for scale." },
        { value:"maritime_couture_muse", label:"Maritime Couture Muse", description:"Ocean goddess and sea queen; a nature-adorned high-fashion icon." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "genre",
      label: "Genre / World",
      description: "Narrative + worldbuilding frame.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'GENRE' OPTIONS HERE ---
        { value:"Corporate_Mysticism", label:"Corporate Mysticism", description:"Corporate Mysticism: Late-Stage Capitalism Meets Magic." },
        { value:"Cozy_Apocalypse", label:"Cozy Apocalypse", description:"Cozy Apocalypse The World Ended But We’re Vibing." },
        { value:"contemporary_minimalist_art", label:"Contemporary minimalist art", description:"Experiential urban design and public light installations." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "medium",
      label: "Art Medium / Rendering Mode",
      description: "How it’s rendered: photo, 3D, illustration, printmaking, etc.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'MEDIUM' OPTIONS HERE ---
        { value:"3d_relief_physical", label:"High-detail 3D render (relief metalwork)", description:"Photorealistic material physics; sculptural relief with ornate metalwork." },
        { value:"cinematic_3d_vfx", label:"Cinematic 3D render (creature VFX)", description:"Film-quality VFX; practical effects aesthetic focused on creature design." },
        { value:"architectural_photo_or_viz", label:"Architectural photography / 3D viz", description:"Clean, minimal fine-art documentation." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "head",
      label: "Face / Head Motif",
      description: "Primary head/face silhouette and defining motif.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'HEAD' OPTIONS HERE ---
        { value:"Alien_dollface", label:"Alien dollface", description:"(prosthetic brow ridge + huge black eyes); glossy wet skin, high-contrast contour." },
        { value:"Cyber_Sigilism", label:"Cyber Sigilism face-map", description:"symmetrical black chrome linework/sigils around eyes and cheeks." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "outfit",
      label: "Outfit (Wardrobe Set)",
      description: "Wardrobe / costume description.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'OUTFIT' OPTIONS HERE ---
        { value:"ceremonial_gear_armor", label:"Ceremonial body-armor fused to body", description:"Weathered teal-patina mandarin collar; chest plate of gears and symbols." },
        { value:"installation_coat_scale", label:"Scale figure winter coat", description:"Dark, stark winter coat." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "materials",
      label: "Materials & Textures",
      description: "Surface/material language to emphasize.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'MATERIALS' OPTIONS HERE ---
        { value:"verdigris_metal", label:"Aged copper/brass verdigris", description:"Engraved metal with Art Nouveau flowing lines." },
        { value:"skin_scales_real", label:"Realistic skin + wet serpent scales", description:"Subsurface scattering; pores; glistening scales." },
        // ... (Paste remaining items) ...
      ]
    },
    {
      key: "pose",
      label: "Action / Pose",
      description: "Body language and action.",
      required: true,
      multi: false,
      options: [
        // --- PASTE YOUR 'POSE' OPTIONS HERE ---
        { value:"hieratic_frontal", label:"Hieratic frontal", description:"Static statue-like authority; arms rigid at sides." },
        { value:"concealed_profile_snakes", label:"Concealed profile + writhing serpents", description:"One eye piercing; serpents in motion." },
        // ... (Paste remaining items) ...
      ]
    }
  ]
};

// ---- App State ----
const state = {
  selections: {}, 
  extraNotes: ""
};

// ---- DOM Elements ----
const $form = document.getElementById("form");
const $chips = document.getElementById("chips");
const $specOut = document.getElementById("specOut");
const $promptOut = document.getElementById("promptOut");
const $extraNotes = document.getElementById("extraNotes");
const $toast = document.getElementById("toast");

// ---- Helpers ----
const el = (tag, props={}, children=[]) => {
  const n = document.createElement(tag);
  for(let k in props) n.setAttribute(k, props[k]);
  children.forEach(c => n.appendChild(c));
  return n;
};

const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

/**
 * 1. BUILD FORM
 * Creates dropdowns + "Include" checkboxes.
 */
function buildForm() {
  $form.innerHTML = "";

  for (const cat of CONFIG.categories) {
    const id = `sel_${cat.key}`;

    // CHECKBOX: "Include" toggle
    const $chk = el("input", { type:"checkbox", class:"rnd-include", "data-key":cat.key });
    $chk.checked = true; // Default to included

    const $chkLabel = el("label", { class:"toggle-label" }, [
        $chk,
        document.createTextNode("Include")
    ]);

    // Label Row
    const $labelRow = el("div", { style:"display:flex; justify-content:space-between; align-items:center; margin-bottom:6px" }, [
      el("span", { style:"font-size:13px; color:var(--text); font-weight:700" }, [ document.createTextNode(cat.label) ]),
      $chkLabel
    ]);

    // Select Dropdown
    const $select = el("select", { id }, []);
    $select.appendChild(el("option", { value:"" }, [document.createTextNode(`Select ${cat.label}…`)]));
    for (const opt of cat.options) {
      const o = el("option", { value: opt.value }, [document.createTextNode(opt.label)]);
      $select.appendChild(o);
    }

    $select.addEventListener("change", () => {
      state.selections[cat.key] = $select.value;
      renderAll();
    });

    const $help = el("div", { class:"help", id:`help_${cat.key}` }, [document.createTextNode(cat.description || "")]);

    const $field = el("div", { class:"field" }, [ $labelRow, $select, $help ]);
    $form.appendChild($field);
  }
}

/**
 * 2. RENDER OUTPUTS
 */
function renderAll() {
  const specLines = [];
  const promptParts = [];
  const activeChips = [];

  for (const cat of CONFIG.categories) {
    const val = state.selections[cat.key];
    if (val) {
      const opt = cat.options.find(o => o.value === val);
      if (opt) {
        // Spec format
        specLines.push(`${cat.label}: ${opt.label}`);
        specLines.push(`  → ${opt.description}`);
        
        // Prompt format (Using description for maximum flavor)
        promptParts.push(opt.description);
        
        // Chips
        activeChips.push({ label: cat.label, val: opt.label });
      }
    }
  }

  if (state.extraNotes.trim()) {
    specLines.push(`\n[Directives]: ${state.extraNotes}`);
    promptParts.push(state.extraNotes);
  }

  $specOut.value = specLines.join("\n");
  $promptOut.value = promptParts.join(", ");

  // Render chips
  $chips.innerHTML = "";
  activeChips.forEach(c => {
    const ch = el("div", { class:"chip" }, [
      document.createTextNode(`${c.label}: `),
      el("b", {}, [document.createTextNode(c.val)])
    ]);
    $chips.appendChild(ch);
  });
}

/**
 * 3. NEW LOGIC: RANDOMIZE SUBSET + INCLUDE CHECK
 * Allows randomizing N categories, but ONLY from the ones marked 'Include'.
 */
function randomizeSubset(count) {
  state.selections = {}; // Clear previous selections

  // A. Filter categories: Must be in CONFIG *and* checkbox must be checked
  const eligibleCats = CONFIG.categories.filter(cat => {
    const chk = document.querySelector(`.rnd-include[data-key="${cat.key}"]`);
    return chk && chk.checked;
  });

  // B. Shuffle the eligible pool
  const shuffled = [...eligibleCats];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }

  // C. Pick top N (or fewer if we don't have enough included categories)
  const targetCats = shuffled.slice(0, count);

  // D. Assign values
  for (const cat of CONFIG.categories) {
    // Only assign if it was picked in our target list
    if (targetCats.includes(cat)) {
       const opt = randomPick(cat.options);
       state.selections[cat.key] = opt.value;
    } else {
       state.selections[cat.key] = "";
    }
    
    // Sync UI
    const sel = document.getElementById(`sel_${cat.key}`);
    if (sel) sel.value = state.selections[cat.key];
  }

  renderAll();
  
  const msgCount = Math.min(count, eligibleCats.length);
  showToast(`Manifested ${msgCount} attributes.`);
}

// ---- Event Listeners ----

// RESET
document.getElementById("resetBtn").addEventListener("click", () => {
  state.selections = {};
  state.extraNotes = "";
  $extraNotes.value = "";
  // Reset checkboxes to checked
  document.querySelectorAll(".rnd-include").forEach(c => c.checked = true);
  
  // Clear dropdowns
  for (const cat of CONFIG.categories) {
    const sel = document.getElementById(`sel_${cat.key}`);
    if(sel) sel.value = "";
  }
  renderAll();
  showToast("Reality Reset.");
});

// 1) RANDOMIZE CHECKED
document.getElementById("randomizeBtn").addEventListener("click", () => {
  let count = 0;
  for (const cat of CONFIG.categories) {
    const chk = document.querySelector(`.rnd-include[data-key="${cat.key}"]`);
    
    // Only pick if checkbox is checked
    if (chk && chk.checked) {
      const opt = randomPick(cat.options);
      state.selections[cat.key] = opt?.value || "";
      count++;
    } else {
      state.selections[cat.key] = "";
    }

    const sel = document.getElementById(`sel_${cat.key}`);
    if (sel) sel.value = state.selections[cat.key];
  }
  renderAll();
  showToast(`Randomized ${count} categories.`);
});

// 2) RANDOM (N)
document.getElementById("rndCountBtn").addEventListener("click", () => {
  const val = parseInt(document.getElementById("rndCountInput").value) || 3;
  randomizeSubset(val);
});

// 3) RANDOM (4-7)
document.getElementById("rndRangeBtn").addEventListener("click", () => {
  const min = 4;
  const max = 7;
  const count = Math.floor(Math.random() * (max - min + 1)) + min;
  randomizeSubset(count);
});

// COPY Buttons
document.getElementById("copyPromptBtn").addEventListener("click", () => {
  if(!$promptOut.value) return;
  navigator.clipboard.writeText($promptOut.value).then(() => showToast("Prompt Captured!"));
});

document.getElementById("copySpecBtn").addEventListener("click", () => {
  if(!$specOut.value) return;
  navigator.clipboard.writeText($specOut.value).then(() => showToast("Spec Sheet Captured!"));
});

document.getElementById("copyAllBtn").addEventListener("click", () => {
  if(!$specOut.value) return;
  const fullText = $specOut.value + "\n\n---\n\n" + $promptOut.value;
  navigator.clipboard.writeText(fullText).then(() => showToast("Full Reality Captured!"));
});

// Notes Listener
$extraNotes.addEventListener("input", () => {
  state.extraNotes = $extraNotes.value;
  renderAll();
});

// Toast Helper
function showToast(msg) {
  $toast.textContent = msg;
  $toast.classList.add("show");
  setTimeout(() => $toast.classList.remove("show"), 2500);
}

// Init
buildForm();
renderAll();

</script>
</body>
</html>
